{% extends "./layout.html" %}

{% block title %}
Categories
{% endblock %}

{% block body %}
    {% if listFlag == True %}
        <div class="categories-container text-center width-20 margin-left-auto margin-right-auto padding-bottom-l margin-top-m">
            <h2 class="padding-top-s padding-bottom-s">Categories</h2>
            <ul class="categories-wrapper flex-container vertical-row">
                {% for category in categories %}
                    <a href="{% url 'category' category %}">
                        <li>{{ category }}</li>
                    </a>
                {% empty %}
                    No categories
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <h2 class="padding-top-s">Search results for {{ category }}:</h2>
        <div class="listings-container flex-container row flex-wrap width-100 padding-top-m padding-bottom-xl">
            {% for listing in listings %}
                <div class="listing-wrapper width-20 padding-all-s">
                    <div class="img-wrapper width-100 flex-container justify-center margin-bottom-s">
                        <a href="{% url 'listing-page' listing.id %}">
                            {% if listing.imageURL %}
                                <img src="{{ listing.imageURL }}" alt="Listing Image" />
                            {% else %}
                                <img src="../../static/auctions/imgs/Placeholder.png" alt="Placeholder" />
                            {% endif %}
                        </a>
                    </div>
                    <div class="text-wrapper text-center padding-left-xs padding-right-xs width-100">
                        <p><strong>{{ listing.title }}</strong></p>
                        <p class="description padding-bottom-xs padding-top-xs"> {{ listing.description }} </p>
                        <p>Current Price: <strong>{{ listing.price|floatformat:2 }} â‚¬</strong></p>
                        {% if listing.openListing == False %}
                            <h3 class="padding-top-s"><strong>CLOSED</strong></h3>
                        {% endif %}
                    </div>
                </div>
                {% empty %}
                No listings for category '{{ category }}'
            {% endfor %}
        </div>
    {% endif %}

{% endblock %}